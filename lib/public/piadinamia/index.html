<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Piadina MIa</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <meta name="description" content="Piadina shopping cart">
        <meta name="keywords" content="piadina">

        <link href="assets/css/bootstrap.min.css" rel="stylesheet">
        <link href="assets/css/bootstrap-responsive.min.css" rel="stylesheet">

        <link href="css/app.css" rel="stylesheet">

        <link rel="shortcut icon" href="/favicon.ico">
    </head>

    <body>
        <div id="wrap">
            <div class="container">

                <div class="page-header">
                    <h1>
                        <img src="img/piadinamia.png"
                             style="width: 64px; height: 64px;">
                             Piadina MIa
                        </h1>
                        <div id="push"></div>
                </div>

                <div class="row">
                    <div id="myCatalog"class="span3">
                        <div id="catalog"></div>
                    </div>

                    <div id="myCart" class="span4">
                        <p class="lead well">
                            Non vi &egrave; mai capitato di andare a comprare
                            qualcosa per gli amici? Preso tutto? E per chi
                            &egrave; questo? :)
                        </p>

                        <div id="messages" class="alert alert-error">
                        </div>

                        <form class="form-horizontal">
                            <div class="control-group">
                                <label class="control-label"
                                    for="ourTag">Tag del carrello gruppo
                                </label>
                                <div class="controls">
                                    <input class="input-small" type="text"
                                        id="ourTag" placeholder="Tag di gruppo">
                                </div>
                                <label class="control-label"
                                    for="myTag">Tag del mio carrello
                                </label>
                                <div class="controls">
                                    <input class="input-small" type="text"
                                        id="myTag" placeholder="Mio tag">
                                </div>
                            </div>
                        </form>

                        <p>
                            <span class="label label-info">
                                Totale quantit&agrave;
                            </span>
                            <span class="simpleCart_quantity badge"></span>
                            <span class="label label-info">
                                Totale ordine
                            </span>
                            <span class="simpleCart_total badge"></span>
                        </p>

                        <div class="simpleCart_items"></div>

                        <p>
                            <div class="btn-block">
                                <button id="saveMyCart"
                                    class="btn btn-small simpleCart_checkout"
                                    type="button">Salva il mio carrello e
                                        guarda quello di gruppo
                                </button>
                                <span class="loading">
                                    &nbsp;&nbsp;&nbsp;&nbsp;
                                </span>
                            </div>
                        </p>

                    </div>

                    <div id="ourCart" class="span4">
                        <div id="carts-list"></div>
                        <div id="items-list"></div>
                        <button id="gotoMyCart"
                            class="btn btn-small" type="button">
                                Torna al mio carrello
                        </button>
                    </div>

                </div>

            </div>

            <div id="push"></div>
        </div>

        <div id="footer">
            <div class="container">
                <p class="muted credit">
                L0g0 by <a href="http://www.ganzio.org">Ganzio</a>,
                P0wer3d by <a href="http://nodejs.org/">Node.js</a>,
                Relax3d by <a href="http://cloudant.com">Cloudant</a> and
                Devel0p3d by <a href="https://github.com/albertosantini">as</a>
                </p>
            </div>
        </div>

        <script type="text/x-template" id="catalog-template">
            <% _.each(catalog, function (item) { %>
                <div class="simpleCart_shelfItem">
                    <img src="<%= item.image %>"
                        style="width: 64px; height: 64px;"
                        class="item_image item_add img-polaroid">
                        <span class="item_price badge">
                            <%= item.price %>&euro;
                        </span>
                        <span class="item_name"><%= item.name %></span>
                </div>
            <% }); %>
        </script>

        <script type="text/x-template" id="carts-list-template">
            <% _.each(carts, function (cart) { %>
                <% if (cart.value.items !== undefined &&
                        cart.value.items.length !== 0) { %>
                    <table class="table table-bordered">
                        <caption>Carrello:
                            <strong><%= cart.value.myTag %></strong>
                        </caption>
                        <tbody>
                            <% _.each(cart.value.items, function (item) { %>
                                <tr>
                                    <td><%= item.name %></td>
                                    <td><%= item.price %>&euro;</td>
                                    <td><%= item.quantity %></td>
                                </tr>
                            <% }); %>
                        </tbody>
                    </table>
                <% } %>
            <% }); %>
        </script>

        <script type="text/x-template" id="items-list-template">
            <% if (_.keys(items).length !== 0) { %>
                <table class="table table-bordered">
                <caption><strong>Articoli</strong></caption>
                <% _.each(_.keys(items), function (item) { %>
                    <tbody>
                        <tr>
                            <td><%= item %></td>
                            <td><%= items[item] %></td>
                        </tr>
                    </tbody>
                <% }); %>
                </table>
            <% } else { %>
                <p class="lead">
                    <strong>Tutti i carrelli sono vuoti!</strong>
                </p>
            <% } %>
        </script>

        <script src="assets/js/jquery-1.9.1.min.js"></script>
        <script src="assets/js/lodash-1.1.1.min.js"></script>
        <script src="assets/js/depot-0.1.4.min.js"></script>
        <script src="assets/js/bootstrap-2.3.1.min.js"></script>
        <script src="assets/js/simpleCart.min.js"></script>

        <script src="js/cart.js"></script>
        <script src="js/catalog.js"></script>
    </body>
</html>
